import React, {useEffect, useState} from "react"import "devextreme/dist/css/dx.light.css"import PropTypes from "prop-types"import {Link, useLocation, withRouter} from "react-router-dom"import {withTranslation} from "react-i18next"import {AccordionBody, AccordionHeader, AccordionItem, Col, Container, Row, UncontrolledAccordion} from "reactstrap"import CustomBreadcrumbs from "../../components/breadcrumbs"import {getAllClassesService, getClassesInfoService} from "../../services/class/classService";const ClassPage = props => {    const location = useLocation();    let params = new URLSearchParams(location.search)    const [classInfo, setClassInfo] = useState({})    const [currentClasses, setCurrentClasses] = useState(null)    const Classes = async (data) => {        return Object.groupBy(data, ({week}) => week);    }    useEffect(() => {        getAllClassesService(params.get("id")).then(response => {            setClassInfo(response)        })    }, [params.get("id")]);    useEffect(() => {        getClassesInfoService(params.get("id")).then(response => {            setCurrentClasses(response)        })    }, [params.get("id")]);    console.log(currentClasses)    return (        <React.Fragment>            <div className="page-content">                <Container fluid className="dash">                    <div>                        <CustomBreadcrumbs                            breadcrumbItems={[{title: props.t("Classes"), url: "/classes"}]}/>                    </div>                    <div className="mt-2">                        <Row>                            <Col xl={7}>                                <div className="p-3 rounded-2">                                    {!currentClasses ?                                        <div>                                            <div className="d-flex p-3 align-items-center"                                                 style={{                                                     backgroundColor: "#02203e",                                                     borderRadius: "6px 6px 0 0"                                                 }}>                                                <div className="font-size-18 fw-500">                                                    <i className="mdi mdi-chart-bar me-3 text-white"></i>                                                    <span className="text-white">İlgili Derste Veri Yok</span>                                                </div>                                            </div>                                        </div>                                        :                                        currentClasses.map((item, index) => {                                            return (                                                <div key={index} className="shadow mt-1">                                                    <div className="d-flex p-3 align-items-center"                                                         style={{                                                             backgroundColor: "#02203e",                                                             borderRadius: "6px 6px 0 0"                                                         }}>                                                        <div className="font-size-18 fw-500">                                                            <i className="mdi mdi-chart-bar me-3 text-white"></i>                                                            <span className="text-white">{index + 1} Hafta</span>                                                            <a>                                                                <i className="bx bx-info-circle font-size-20 pointer ms-1 text-white"                                                                   style={{verticalAlign: "middle"}}/>                                                            </a>                                                        </div>                                                    </div>                                                    <div className="bg-white p-3">                                                        <div>                                                            {item.map((item, index) => {                                                                return (                                                                    <div key={index} className="mt-1">                                                                        <a href={item.url} target="_blank"                                                                           rel="noopener noreferrer"                                                                           className="d-flex align-items-center">                                                                            <div                                                                                className="d-flex align-items-center me-2">                                                                                <div className="d-flex">                                                                                    <i className={`${item.type ? "fas fa-users bg-primary" : "fas fa-file-archive bg-warning"} avatar-classes font-size-24 align-middle me-1 text-white p-1 rounded-2`}/>                                                                                </div>                                                                            </div>                                                                            <div                                                                                className={`${item.type ? "text-primary" : "text-warning"} font-size-14 fw-semibold`}>{item.title}</div>                                                                        </a>                                                                        <div>                                                                            <span>{item.description}</span>                                                                        </div>                                                                    </div>                                                                )                                                            })}                                                        </div>                                                    </div>                                                </div>                                                // <UncontrolledAccordion id={`accordion-${index}`} key={index} stayOpen>                                                //     <AccordionItem className="mt-2">                                                //         <AccordionHeader targetId={index}>                                                //             {index + 1}. Hafta                                                //         </AccordionHeader>                                                //         <AccordionBody accordionId={index}>                                                //         </AccordionBody>                                                //     </AccordionItem>                                                // </UncontrolledAccordion>                                            )                                        })}                                </div>                            </Col>                            <Col xl={5}>                                <div className="p-3">                                    <div className="bg-white rounded-2 p-3">                                        <div className="text-center">                                            <h5>Ders Açıklaması</h5>                                        </div>                                        <Row>                                            <Col xl={8}>                                                <div style={{lineHeight: '2'}}>                                                    <div className="mt-2">                                                                    <span                                                                        className="fw-semibold">Ders Adı:</span> {classInfo.name}                                                    </div>                                                    <div>                                                                    <span                                                                        className="fw-semibold">Ders sınıfı:</span> {classInfo.class}                                                    </div>                                                    <div>                                                        <span                                                            className="fw-semibold">Öğretmen Adı:</span>{classInfo.teacher_id}                                                    </div>                                                    <div>                                                        <span                                                            className="fw-semibold">Öğretmen Soyadı:</span>{classInfo.teacher_id}                                                    </div>                                                    <div>                                                       <span                                                           className="fw-semibold"> Öğretmen Mail Adresi:</span>{classInfo.teacher_id}                                                    </div>                                                    <div>                                                        <span                                                            className="fw-semibold"> Derse Katılan Öğrenci Sayısı:</span> 31                                                    </div>                                                </div>                                            </Col>                                            <Col xl={4} className="align-self-center">                                                <img alt="atınç yılmaz" className="img-thumbnail rounded-4"                                                     src="https://mmf.beykent.edu.tr/images/default-source/akademik-kadro/muhendislik-ve-mimarl%C4%B1k-fakultesi/atinc-yilmaz.jpg?sfvrsn=3964d35_14"/>                                            </Col>                                        </Row>                                    </div>                                </div>                            </Col>                        </Row>                    </div>                </Container>            </div>        </React.Fragment>    )        ;}ClassPage.propTypes = {    location: PropTypes.any,    t: PropTypes.any,};export default withRouter(withTranslation()(ClassPage));